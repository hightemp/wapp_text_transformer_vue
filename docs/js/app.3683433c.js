(function(){"use strict";var __webpack_modules__={107:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var ace_builds__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(239),ace_builds__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(ace_builds__WEBPACK_IMPORTED_MODULE_0__),ace_builds_src_noconflict_mode_javascript_url__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(322),ace_builds_src_noconflict_mode_javascript_url__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(ace_builds_src_noconflict_mode_javascript_url__WEBPACK_IMPORTED_MODULE_1__),ace_builds_src_noconflict_theme_chrome_url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(718),ace_builds_src_noconflict_theme_chrome_url__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(ace_builds_src_noconflict_theme_chrome_url__WEBPACK_IMPORTED_MODULE_2__),vue3_ace_editor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(138),_components_list_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(78),_components_window_vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(862),_components_repo_window_vue__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(974),_components_saved_toast_vue__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(592),_components_loader_vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(654),vuex__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(907),_lib__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(992);ace_builds__WEBPACK_IMPORTED_MODULE_0___default().config.setModuleUrl("ace/mode/javascript",ace_builds_src_noconflict_mode_javascript_url__WEBPACK_IMPORTED_MODULE_1___default()),ace_builds__WEBPACK_IMPORTED_MODULE_0___default().config.setModuleUrl("ace/theme/chrome",ace_builds_src_noconflict_theme_chrome_url__WEBPACK_IMPORTED_MODULE_2___default()),__webpack_exports__["Z"]={name:"App",components:{list:_components_list_vue__WEBPACK_IMPORTED_MODULE_4__.Z,info_window:_components_window_vue__WEBPACK_IMPORTED_MODULE_5__.Z,repo_window:_components_repo_window_vue__WEBPACK_IMPORTED_MODULE_6__.Z,saved_toast:_components_saved_toast_vue__WEBPACK_IMPORTED_MODULE_7__.Z,loader:_components_loader_vue__WEBPACK_IMPORTED_MODULE_8__.Z,VAceEditor:vue3_ace_editor__WEBPACK_IMPORTED_MODULE_3__.m},computed:{...(0,_lib__WEBPACK_IMPORTED_MODULE_9__.cc)("bShowRepoWindow bShowSaveToast"),oCurrentScript:{get(){return this.$store.state.oDatabase["scripts"]["selection_item"]}},sCurrentScriptContent:{get(){return this.oCurrentScript["content"]},set(e){this.oCurrentScript["content"]=e}},oCurrentText(){return this.$store.state.oDatabase["files_texts"]["selection_item"]},sCurrentTextContent:{get(){return this.oCurrentText["text"]},set(e){this.oCurrentText["text"]=e}},aTexts:{get(){return this.$store.state.oDatabase["files_texts"]["data"].filter((e=>e.file_id==this.oSelectedFile.id))}},oSelectedFile(){return this.$store.state.oDatabase["files"]["selection_item"]},oSelectedScript(){return this.$store.state.oDatabase["scripts"]["selection_item"]},oDefaultFileTextsItem(){return{name:"",text:"",file_id:this.oSelectedFile.id}}},data(){return{oDefaultFileItem:{name:"",texts:[{id:1,name:"Текст",content:""}],selected_text:0},oDefaultScriptItem:{name:"",content:""},sMode:"files",aMenu:[{id:"repo-window",title:"Выбрать репозиторий",icon:"bi-person-fill"},{id:"save",title:"Сохранить",icon:"bi-arrow-up-square"},{id:"files",title:"Файлы",icon:"bi-files"},{id:"scripts",title:"Скрипты",icon:"bi-filetype-js"}]}},methods:{...(0,vuex__WEBPACK_IMPORTED_MODULE_10__.OI)(_lib__WEBPACK_IMPORTED_MODULE_9__.a`fnLoadRepos fnShowWindow fnAddTableItem`),...(0,vuex__WEBPACK_IMPORTED_MODULE_10__.nv)(_lib__WEBPACK_IMPORTED_MODULE_9__.a`fnSaveDatabase fnImportDatabase fnExportDatabase`),fnClickLeftMenu(e){"repo-window"==e.id&&(this.bShowRepoWindow=!0),"save"==e.id&&this.fnSaveAll(),"files"==e.id&&(this.sMode="files"),"scripts"==e.id&&(this.sMode="scripts")},fnSaveAll(){this.fnSaveDatabase(),this.bShowSaveToast=!0},fnExport(){this.fnExportDatabase()},fnImport(){let e=this.$refs.file_selector.files[0],t=new FileReader;var o=this;t.readAsText(e),t.onload=function(){o.fnImportDatabase(t.result)},t.onerror=function(){console.error(t.error)}},fnFileImportChange(){this.fnImport()},fnShowHelp(){this.fnShowWindow("help")},fnRunScript(){var sText=this.sCurrentTextContent;eval(`${this.sCurrentScriptContent}`),this.sCurrentTextContent=sText},fnRunScriptAndAdd(){var sText=""+this.sCurrentTextContent;eval(`${this.sCurrentScriptContent}`);var oItem={name:this.oCurrentText.name+"*",text:sText};this.fnAddTableItem({sTableName:"files_texts",oItem:oItem})}},created(){var e=this;this.fnLoadRepos(),document.addEventListener("keydown",(t=>{t.ctrlKey&&83===t.keyCode&&(t.preventDefault(),e.fnSaveAll())})),window.addEventListener("click",(t=>{this.bShowTaskMenu&&(e.$refs.task_menu.contains(t.target)||(this.bShowTaskMenu=!1))}))}}},78:function(e,t,o){o.d(t,{Z:function(){return Ke}});var a=o(252),l=o(963),n=o(577);const s={class:"list_top-panel"},i={class:"list_wrapper"},r={class:"list-group"},_=["onClick"];function c(e,t,o,c,d,m){const u=(0,a.up)("dropdown"),p=(0,a.up)("edit_window");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",s,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>d.sFilter=e)},null,512),[[l.nr,d.sFilter]]),(0,a.Wm)(u,{items:d.aDropdownMenu,onClickitem:m.fnDropdownMenuItemClick},null,8,["items","onClickitem"])]),(0,a._)("div",i,[(0,a._)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.oItems,(t=>((0,a.wg)(),(0,a.iD)("a",{key:t,href:"#",class:(0,n.C_)("list-group-item list-group-item-action "+(t.id==m.sSelectedID?"active":"")),onClick:e=>m.fnItemClick(e,t)},[(0,a.WI)(e.$slots,"default",{oItem:t})],10,_)))),128))])]),(0,a.Wm)(p,{title:"Редактирование",form_name:o.form_name,table_name:o.table_name},null,8,["form_name","table_name"])],64)}var d=o(907),m=o(992);const u={class:"dropdown"},p=["onClick","innerHTML"];function f(e,t,o,l,s,i){return(0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("a",{class:"btn btn-light dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:t[0]||(t[0]=(...e)=>i.fnMenuOpen&&i.fnMenuOpen(...e))}),(0,a._)("ul",{class:(0,n.C_)("dropdown-menu "+(s.bOpened?"show":""))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.aItems,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id},[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t=>i.fnOnItemClick(e),innerHTML:e.title},null,8,p)])))),128))],2)])}var b={props:["items"],emits:["clickitem"],data(){return{aItems:this.items,bOpened:!1}},methods:{fnFocusOut(){this.bOpened=!1},fnMenuOpen(){this.bOpened=!this.bOpened},fnOnItemClick(e){this.bOpened=!1,this.$emit("clickitem",e)}},created(){window.addEventListener("click",(e=>{this.$el.contains(e.target)||(this.bOpened=!1)}))}},w=o(744);const h=(0,w.Z)(b,[["render",f]]);var v=h;const y={key:0},k=(0,a._)("div",{class:"overlay"},null,-1),I={class:"modal show"},D={class:"modal-dialog"},g={class:"modal-content"},R={class:"modal-header"},C={class:"modal-title"},E={class:"modal-body"},S={class:"modal-footer"};function x(e,t,o,l,s,i){const r=(0,a.up)("forms");return i.bShow?((0,a.wg)(),(0,a.iD)("div",y,[k,(0,a._)("div",I,[(0,a._)("div",D,[(0,a._)("div",g,[(0,a._)("div",R,[(0,a._)("h5",C,(0,n.zw)(o.title),1),(0,a._)("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=(...e)=>i.fnClose&&i.fnClose(...e))})]),(0,a._)("div",E,[(0,a.Wm)(r,{form_name:o.form_name},null,8,["form_name"])]),(0,a._)("div",S,[(0,a._)("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=(...e)=>i.fnClose&&i.fnClose(...e))},"Отмена"),(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>i.fnSave&&i.fnSave(...e))},"Сохранить")])])])])])):(0,a.kq)("",!0)}function F(e,t,o,l,n,s){const i=(0,a.up)("form_component");return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.oItems,((e,t)=>((0,a.wg)(),(0,a.j4)(i,{key:e,item:e,onInput:e=>s.fnInput(e,t),value:s.fnGetFieldValue(this.form_name,t)},null,8,["item","onInput","value"])))),128)}const O={key:0,class:"mb-3"},W={class:"form-label"},T=["placeholder"],U={key:1,class:"mb-3"},L={class:"form-label"},M=["placeholder"],P={key:2,class:"mb-3"},V={class:"form-label"},q=["placeholder"],A={key:3,class:"mb-3"},N={class:"form-label"},H=["placeholder"],K={key:4,class:"mb-3"},z={class:"form-label"},B=["placeholder"],$={key:5,class:"mb-3"},j={class:"form-label"},J=(0,a._)("input",{type:"file",class:"form-control"},null,-1),Z={key:6,class:"mb-3"},Y={class:"form-label"},G=["placeholder"],Q={key:7,class:"mb-3"},X={class:"form-label"},ee=["placeholder"],te={key:8,class:"mb-3"},oe={class:"form-label"},ae=["placeholder"],le={key:9,class:"mb-3"},ne={class:"form-label"},se=["placeholder","min","max"],ie={key:10,class:"mb-3"},re={class:"form-label"},_e=["placeholder"],ce={key:11,class:"mb-3"},de={class:"form-label"},me=["placeholder"],ue={key:12,class:"mb-3"},pe={class:"form-label"},fe=["placeholder"],be={key:13,class:"mb-3"},we={class:"form-label"},he=["placeholder"],ve={key:14,class:"mb-3"},ye={class:"form-label"},ke=["placeholder"],Ie={key:15,class:"mb-3"},De={class:"form-label"},ge=["value"],Re={key:16,class:"mb-3"},Ce={class:"form-label"},Ee=["value"],Se={key:17,class:"mb-3"},xe={class:"form-label"},Fe=["value"];function Oe(e,t,o,s,i,r){return(0,a.wg)(),(0,a.iD)(a.HY,null,["text"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",O,[(0,a._)("label",W,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[0]||(t[0]=e=>r.mValue=e)},null,8,T),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"email"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",U,[(0,a._)("label",L,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"email",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[1]||(t[1]=e=>r.mValue=e)},null,8,M),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"color"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",P,[(0,a._)("label",V,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"color",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[2]||(t[2]=e=>r.mValue=e)},null,8,q),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"date"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",A,[(0,a._)("label",N,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"date",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[3]||(t[3]=e=>r.mValue=e)},null,8,H),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"datetime-local"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",K,[(0,a._)("label",z,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"datetime-local",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[4]||(t[4]=e=>r.mValue=e)},null,8,B),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"file"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",$,[(0,a._)("label",j,(0,n.zw)(r.oItem.label),1),J])):(0,a.kq)("",!0),"month"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",Z,[(0,a._)("label",Y,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"month",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[5]||(t[5]=e=>r.mValue=e)},null,8,G),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"number"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",Q,[(0,a._)("label",X,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[6]||(t[6]=e=>r.mValue=e)},null,8,ee),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"password"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",te,[(0,a._)("label",oe,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"password",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[7]||(t[7]=e=>r.mValue=e)},null,8,ae),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"range"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",le,[(0,a._)("label",ne,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"range",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[8]||(t[8]=e=>r.mValue=e),min:r.oItem.min,max:r.oItem.max},null,8,se),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"search"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",ie,[(0,a._)("label",re,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"search",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[9]||(t[9]=e=>r.mValue=e)},null,8,_e),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"tel"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",ce,[(0,a._)("label",de,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"tel",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[10]||(t[10]=e=>r.mValue=e)},null,8,me),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"time"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",ue,[(0,a._)("label",pe,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"time",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[11]||(t[11]=e=>r.mValue=e)},null,8,fe),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"url"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",be,[(0,a._)("label",we,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"url",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[12]||(t[12]=e=>r.mValue=e)},null,8,he),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"week"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",ve,[(0,a._)("label",ye,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("input",{type:"week",class:"form-control",placeholder:r.oItem.placeholder,"onUpdate:modelValue":t[13]||(t[13]=e=>r.mValue=e)},null,8,ke),[[l.nr,r.mValue]])])):(0,a.kq)("",!0),"checkbox_list"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",Ie,[(0,a._)("label",De,(0,n.zw)(r.oItem.label),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.oItem.items,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e},[(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=e=>r.mValue=e),value:e.value},null,8,ge),[[l.e8,r.mValue]]),(0,a.Uk)((0,n.zw)(e.label),1)])])))),128))])):(0,a.kq)("",!0),"radio_list"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",Re,[(0,a._)("label",Ce,(0,n.zw)(r.oItem.label),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.oItem.items,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e},[(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"radio","onUpdate:modelValue":t[15]||(t[15]=e=>r.mValue=e),value:e.value},null,8,Ee),[[l.G2,r.mValue]]),(0,a.Uk)((0,n.zw)(e.label),1)])])))),128))])):(0,a.kq)("",!0),"select"==r.oItem.type?((0,a.wg)(),(0,a.iD)("div",Se,[(0,a._)("label",xe,(0,n.zw)(r.oItem.label),1),(0,a.wy)((0,a._)("select",{class:"form-control","onUpdate:modelValue":t[16]||(t[16]=e=>r.mValue=e)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.oItem.items,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e.value},(0,n.zw)(e.label),9,Fe)))),128))],512),[[l.bM,r.mValue]])])):(0,a.kq)("",!0)],64)}var We={props:["item","value"],emits:["input"],computed:{oItem(){return this.item},mValue:{get(){return this.value},set(e){this.$emit("input",e)}}}};const Te=(0,w.Z)(We,[["render",Oe]]);var Ue=Te,Le={props:["form_name"],components:{form_component:Ue},computed:{oItems(){return this.$store.state.oStructure[this.form_name]}},methods:{fnGetFieldValue(e,t){return this.$store.getters.fnGetFieldValue(e,t)},fnInput(e,t){this.$store.commit("fnUpdateFormVar",{sFormName:this.form_name,sFieldName:t,mV:e})}}};const Me=(0,w.Z)(Le,[["render",F]]);var Pe=Me,Ve={props:["title","form_name","table_name"],components:{forms:Pe},computed:{bShow(){return this.$store.state.oEditWindow[this.form_name].window_show}},methods:{...(0,d.OI)(m.a`fnHideEditWindow fnEditWindowSave`),fnClose(){this.fnHideEditWindow(this.form_name)},fnSave(){this.fnEditWindowSave({sTableName:this.table_name,sFormName:this.form_name}),this.fnHideEditWindow(this.form_name)}}};const qe=(0,w.Z)(Ve,[["render",x]]);var Ae=qe,Ne={props:["form_name","table_name","filter_field","default_item"],emits:["clickitem"],components:{dropdown:v,edit_window:Ae},computed:{sSelectedID:{get(){return this.$store.state.oDatabase[this.table_name]["selection_index"]},set(e){this.$store.commit("fnUpdateDatabaseVar",{sTableName:this.table_name,sVarName:"selection_index",mV:e})}},oSelectedItem:{get(){return this.$store.state.oDatabase[this.table_name]["selection_item"]},set(e){this.$store.commit("fnUpdateDatabaseVar",{sTableName:this.table_name,sVarName:"selection_item",mV:e})}},oItems(){var e=this.$store.state.oDatabase[this.table_name]["data"];return this.filter_field&&(e=e.filter((e=>e[this.filter_field]&&~e[this.filter_field].indexOf(this.sFilter)))),e}},data(){return{sFilter:"",aDropdownMenu:[{id:"add",title:'<i class="bi bi-plus-lg"></i> Добавить'},{id:"edit",title:'<i class="bi bi-pencil"></i> Редактировать'},{id:"delete",title:'<i class="bi bi-trash"></i> Удалить'}]}},methods:{...(0,d.OI)(m.a`fnShowEditWindow fnRemoveFromTable`),fnItemClick(e,t){this.sSelectedID=t.id,this.oSelectedItem=t,this.$emit("clickitem",e)},fnDropdownMenuItemClick(e){"add"==e.id&&this.fnShowEditWindow({sFormName:this.form_name,oItem:this.default_item}),"edit"==e.id&&(this.oSelectedItem||alert("Нужно выбрать"),this.fnShowEditWindow({sFormName:this.form_name,oItem:this.oSelectedItem})),"delete"==e.id&&this.fnRemoveFromTable({sTableName:this.table_name,oItem:this.oSelectedItem})}}};const He=(0,w.Z)(Ne,[["render",c]]);var Ke=He},654:function(e,t,o){o.d(t,{Z:function(){return p}});var a=o(252),l=o(963);const n={class:"loader"},s=(0,a._)("div",{class:"center"},[(0,a._)("div",{class:"lds-dual-ring"})],-1),i=[s];function r(e,t,o,s,r,_){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",n,i,512)),[[l.F8,e.bShowLoader]])}var _=o(992),c=o(907),d={computed:{...(0,c.rn)(_.a`bShowLoader`)}},m=o(744);const u=(0,m.Z)(d,[["render",r]]);var p=u},974:function(e,t,o){o.d(t,{Z:function(){return we}});var a=o(252),l=o(963),n=o(577);const s=(0,a._)("div",{class:"block-overlay"},null,-1),i={id:"modal-ask-api-key",class:"modal show",tabindex:"-1"},r={class:"modal-dialog"},_={class:"modal-content"},c=(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title"},"Данные репозитория")],-1),d={class:"modal-body",style:{height:"500px","overflow-y":"scroll"}},m={class:"modal-ask-api_list_buttons"},u=(0,a._)("div",null,null,-1),p={class:"mb-3"},f=(0,a._)("label",{for:"",class:"form-label"},"Логин",-1),b=(0,a._)("option",{value:"github"},"github",-1),w=(0,a._)("option",{value:"webdav"},"webdav",-1),h=[b,w],v={class:"mb-3"},y=(0,a._)("label",{for:"",class:"form-label"},"Название",-1),k={class:"mb-3"},I=(0,a._)("label",{for:"",class:"form-label"},"Логин",-1),D={class:"mb-3"},g=(0,a._)("label",{for:"",class:"form-label"},"Репозиторий",-1),R={class:"mb-3"},C=(0,a._)("label",{for:"",class:"form-label"},"API Ключ",-1),E={class:"mb-3"},S=(0,a._)("label",{for:"",class:"form-label"},"URL",-1),x={class:"mb-3"},F=(0,a._)("label",{for:"",class:"form-label"},"Пользователь",-1),O={class:"mb-3"},W=(0,a._)("label",{for:"",class:"form-label"},"Пароль",-1),T={class:"modal-ask-api_list_buttons"},U=(0,a._)("div",null,null,-1),L=(0,a._)("i",{class:"bi bi-box-arrow-down"},null,-1),M=[L],P=(0,a._)("i",{class:"bi bi-box-arrow-in-up"},null,-1),V=(0,a._)("i",{class:"bi bi-trash"},null,-1),q=[V],A=(0,a._)("i",{class:"bi bi-plus-lg"},null,-1),N=[A],H={class:"list-repo-item_desc"},K={class:"list-repo-item_title"},z={class:"list-repo-item_type"},B={class:"list-repo-item_name"},$=(0,a._)("b",null,"login:",-1),j=(0,a._)("b",null,"repo:",-1),J=(0,a._)("b",null,"key:",-1),Z=(0,a._)("b",null,"url:",-1),Y=(0,a._)("b",null,"username:",-1),G=(0,a._)("b",null,"password:",-1),Q={style:{display:"flex","align-items":"start"}},X=["onClick"],ee=(0,a._)("i",{class:"bi bi-pencil"},null,-1),te=[ee],oe=["onClick"],ae=(0,a._)("i",{class:"bi bi-trash"},null,-1),le=[ae],ne=(0,a._)("div",{style:{width:"32px",height:"29px"}},null,-1),se=(0,a._)("div",{style:{width:"32px",height:"29px"}},null,-1),ie=["onClick"],re=(0,a._)("i",{class:"bi bi-star-fill"},null,-1),_e=[re],ce={class:"modal-footer"};function de(e,t,o,b,w,L){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",null,[s,(0,a._)("div",i,[(0,a._)("div",r,[(0,a._)("div",_,[c,(0,a._)("div",d,[null!==w.iEditIndex?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("div",m,[u,(0,a._)("div",null,[(0,a._)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=(...e)=>L.fnCancelRepo&&L.fnCancelRepo(...e))},"Отмена"),(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>L.fnSaveRepo&&L.fnSaveRepo(...e))},"Сохранить")])]),(0,a._)("div",p,[f,(0,a.wy)((0,a._)("select",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>w.sFromType=e)},h,512),[[l.bM,w.sFromType]])]),(0,a._)("div",v,[y,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=t=>e.sFormName=t)},null,512),[[l.nr,e.sFormName]])]),"github"==w.sFromType?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("div",k,[I,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>w.sFormLogin=e)},null,512),[[l.nr,w.sFormLogin]])]),(0,a._)("div",D,[g,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>w.sFormRepo=e)},null,512),[[l.nr,w.sFormRepo]])]),(0,a._)("div",R,[C,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>w.sFormKey=e)},null,512),[[l.nr,w.sFormKey]])])],64)):(0,a.kq)("",!0),"webdav"==w.sFromType?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("div",E,[S,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>w.sFormURL=e)},null,512),[[l.nr,w.sFormURL]])]),(0,a._)("div",x,[F,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=t=>e.sFormUsername=t)},null,512),[[l.nr,e.sFormUsername]])]),(0,a._)("div",O,[W,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=t=>e.sFormPassword=t)},null,512),[[l.nr,e.sFormPassword]])])],64)):(0,a.kq)("",!0)],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("div",T,[U,(0,a._)("div",null,[(0,a._)("button",{class:"btn btn-secondary",title:"Экспортировать",onClick:t[10]||(t[10]=(...e)=>L.fnExport&&L.fnExport(...e))},M),(0,a._)("button",{class:"btn btn-import btn-secondary",title:"Импортировать",onClick:t[12]||(t[12]=(...e)=>L.fnImport&&L.fnImport(...e))},[P,(0,a._)("label",null,[(0,a._)("input",{type:"file",ref:"file_selector",onChange:t[11]||(t[11]=(...e)=>L.fnFileImportChange&&L.fnFileImportChange(...e))},null,544)])]),(0,a._)("button",{class:"btn btn-danger",title:"Очистить все",onClick:t[13]||(t[13]=(...e)=>L.fnCleanRepo&&L.fnCleanRepo(...e))},q),(0,a._)("button",{class:"btn btn-success",title:"Добавить",onClick:t[14]||(t[14]=(...e)=>L.fnNewRepo&&L.fnNewRepo(...e))},N)])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.aReposList,((t,o)=>((0,a.wg)(),(0,a.iD)("div",{key:o,class:(0,n.C_)("list-repo-item "+(e.iSelectedRepoIndex==o?"active":""))},[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("div",H,[(0,a._)("div",K,[(0,a._)("div",z,(0,n.zw)(t.type),1),(0,a._)("div",B,(0,n.zw)(t.name),1)]),"github"==t.type?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("div",null,[$,(0,a.Uk)(" "+(0,n.zw)(t.login),1)]),(0,a._)("div",null,[j,(0,a.Uk)(" "+(0,n.zw)(t.repo),1)]),(0,a._)("div",null,[J,(0,a.Uk)(" "+(0,n.zw)(t.key),1)])],64)):(0,a.kq)("",!0),"webdav"==t.type?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("div",null,[Z,(0,a.Uk)(" "+(0,n.zw)(t.url),1)]),(0,a._)("div",null,[Y,(0,a.Uk)(" "+(0,n.zw)(t.username),1)]),(0,a._)("div",null,[G,(0,a.Uk)(" "+(0,n.zw)(t.password),1)])],64)):(0,a.kq)("",!0)]),(0,a._)("div",Q,["localstorage"!=t.type?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("button",{class:"btn btn-success",onClick:e=>L.fnEditRepo(o),title:"Редактировать"},te,8,X),(0,a._)("button",{class:"btn btn-danger",onClick:e=>L.fnRemoveRepo(o),title:"Удалить"},le,8,oe)],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[ne,se],64)),(0,a._)("button",{class:"btn btn-info",onClick:e=>L.fnSelectRepo(o),title:"Выбрать"},_e,8,ie)])],64)):(0,a.kq)("",!0)],2)))),128))],64))]),(0,a._)("div",ce,[(0,a._)("button",{class:"btn btn-success",onClick:t[15]||(t[15]=e=>L.fnAcceptRepo())},"Выбрать")])])])])],512)),[[l.F8,e.bShowRepoWindow]])}var me=o(992),ue=o(907),pe={name:"AskAPIWindow",components:{},computed:{...(0,ue.rn)(me.a`iSelectedRepoIndex bShowRepoWindow`),...(0,ue.Se)(me.a`aReposList`)},data(){return{iEditIndex:null,sFormLogin:"",sFormRepo:"",sFormKey:"",sFormURL:"",sFromType:"github"}},methods:{...(0,ue.OI)(me.a`fnReposRemove fnReposSelect fnReposClean fnReposUpdate`),...(0,ue.nv)(me.a`fnPrepareRepo fnExportRepos fnImportRepos`),fnSaveRepo(){if(this.sFormName){var e={name:this.sFormName,login:this.sFormLogin,repo:this.sFormRepo,key:this.sFormKey,type:this.sFromType,url:this.sFormURL,username:this.sFormUsername,password:this.sFormPassword};this.fnReposUpdate({iIndex:this.iEditIndex,oObj:e}),this.iEditIndex=null}else alert("Надо заполнить поле - Название")},fnNewRepo(){this.iEditIndex=-1,this.sFormName="",this.sFormLogin="",this.sFormRepo="",this.sFormKey="",this.sFormType="github",this.sFormURL="",this.sFormUsername="",this.sFormPassword=""},fnEditRepo(e){this.iEditIndex=e;var t=this.aReposList[this.iEditIndex];this.sFormName=t.name,this.sFormLogin=t.login,this.sFormRepo=t.repo,this.sFormKey=t.key,this.sFormType=t.type,this.sFormURL=t.url,this.sFormUsername=t.username,this.sFormPassword=t.password},fnRemoveRepo(e){this.fnReposRemove(e)},fnSelectRepo(e){this.fnReposSelect(e)},fnCleanRepo(){this.fnReposClean()},fnCancelRepo(){this.iEditIndex=null},fnAcceptRepo(){if(!this.aReposList[this.iSelectedRepoIndex])return alert("Нужно выбрать репозиторий");this.fnPrepareRepo()},fnExport(){this.fnExportRepos()},fnImport(){let e=this.$refs.file_selector.files[0],t=new FileReader;var o=this;t.readAsText(e),t.onload=function(){o.fnImportDatabase(t.result)},t.onerror=function(){console.error(t.error)}},fnFileImportChange(){this.fnImport()}},created(){}},fe=o(744);const be=(0,fe.Z)(pe,[["render",de]]);var we=be},592:function(e,t,o){o.d(t,{Z:function(){return p}});var a=o(252);const l={class:"toast-container position-fixed top-0 end-0 p-3"},n={key:0,class:"toast fade show",role:"alert","aria-live":"assertive","aria-atomic":"true"},s=(0,a._)("div",{class:"toast-header"},[(0,a._)("strong",{class:"me-auto"},"Сохранено"),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"})],-1),i=(0,a._)("div",{class:"toast-body"}," Данные были сохранены ",-1),r=[s,i];function _(e,t,o,s,i,_){return(0,a.wg)(),(0,a.iD)("div",l,[e.bShowSaveToast?((0,a.wg)(),(0,a.iD)("div",n,r)):(0,a.kq)("",!0)])}var c=o(992),d={name:"SavedToast",components:{},computed:{...(0,c.cc)("bShowSaveToast")},data(){return{}},watch:{bShowSaveToast(e,t){e&&setTimeout((()=>{this.bShowSaveToast=!1}),2e3)}}},m=o(744);const u=(0,m.Z)(d,[["render",_]]);var p=u},862:function(e,t,o){o.d(t,{Z:function(){return v}});var a=o(252),l=o(577);const n={key:0},s=(0,a._)("div",{class:"overlay"},null,-1),i={class:"modal show",tabindex:"-1"},r={class:"modal-dialog"},_={class:"modal-content"},c={class:"modal-header"},d={class:"modal-title"},m=["innerHTML"];function u(e,t,o,u,p,f){return f.bShow?((0,a.wg)(),(0,a.iD)("div",n,[s,(0,a._)("div",i,[(0,a._)("div",r,[(0,a._)("div",_,[(0,a._)("div",c,[(0,a._)("h5",d,(0,l.zw)(e.title),1),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>f.fnClose&&f.fnClose(...e))})]),(0,a._)("div",{class:"modal-body",innerHTML:f.sContentHTML},null,8,m)])])])])):(0,a.kq)("",!0)}var p=o(907),f=o(992),b={props:["window_name"],computed:{sContentHTML(){return this.$store.state.oWindow[this.window_name].content_html},sTitle(){return this.$store.state.oWindow[this.window_name].title},bShow(){return this.$store.state.oWindow[this.window_name].window_show}},methods:{...(0,p.OI)(f.a`fnHideWindow`),fnClose(){this.fnHideWindow(this.window_name)}}},w=o(744);const h=(0,w.Z)(b,[["render",u]]);var v=h},992:function(e,t,o){function a(e){return e[0].split(" ")}function l(e){return{[e]:{get(){return this.$store.state[e]},set(t){this.$store.commit("fnUpdateVar",{sName:e,sV:t})}}}}function n(e){var t={},o=e.split(" ");for(var a of o)t=Object.assign(t,l(a));return t}function s(e,t){var o="data:text/json;charset=utf-8,"+encodeURIComponent(t),a=document.createElement("A");a.setAttribute("href",o),a.setAttribute("download",`${e}_${(new Date).getTime()}.json`),a.click(),a.remove()}o.d(t,{N:function(){return s},a:function(){return a},cc:function(){return n}})},636:function(e,t,o){var a=o(963),l=o(252),n=o(577);const s={class:"wrapper"},i={class:"left-panel"},r=["onClick","title"],_=(0,l._)("hr",null,null,-1),c=(0,l._)("i",{class:"bi bi-box-arrow-down"},null,-1),d=[c],m={class:"btn btn-import",title:"Импортировать"},u=(0,l._)("i",{class:"bi bi-box-arrow-in-up"},null,-1),p={class:"files-panel"},f={key:0,class:"text-panel"},b={class:"text-block"},w={class:"text-block-left-panel"},h={class:"text-block-editor-panel"},v={class:"text-action-panel"},y={class:"scripts-block"},k={class:"scripts-left-panel"},I={class:"scripts-editor-panel"},D={key:1,class:"scripts-panel"};function g(e,t,o,a,c,g){const R=(0,l.up)("list"),C=(0,l.up)("v-ace-editor"),E=(0,l.up)("info_window"),S=(0,l.up)("repo_window"),x=(0,l.up)("saved_toast"),F=(0,l.up)("loader");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",s,[(0,l._)("div",i,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.aMenu,((e,t)=>((0,l.wg)(),(0,l.iD)("button",{key:t,class:"btn",onClick:t=>g.fnClickLeftMenu(e),title:e.title},[(0,l._)("i",{class:(0,n.C_)("bi "+e.icon)},null,2)],8,r)))),128)),_,(0,l._)("button",{class:"btn",title:"Экспортировать",onClick:t[0]||(t[0]=(...e)=>g.fnExport&&g.fnExport(...e))},d),(0,l._)("button",m,[u,(0,l._)("label",null,[(0,l._)("input",{type:"file",ref:"file_selector",onChange:t[1]||(t[1]=(...e)=>g.fnFileImportChange&&g.fnFileImportChange(...e))},null,544)])])]),"files"==c.sMode?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",p,[(0,l.Wm)(R,{table_name:"files",form_name:"files",filter_field:"name",default_item:c.oDefaultFileItem},{default:(0,l.w5)((e=>[(0,l.Uk)((0,n.zw)(e.oItem.name),1)])),_:1},8,["default_item"])]),g.oSelectedFile?((0,l.wg)(),(0,l.iD)("div",f,[(0,l._)("div",b,[(0,l._)("div",w,[(0,l.Wm)(R,{table_name:"files_texts",form_name:"files_texts",filter_field:"name",default_item:g.oDefaultFileTextsItem},{default:(0,l.w5)((e=>[(0,l.Uk)((0,n.zw)(e.oItem.name),1)])),_:1},8,["default_item"])]),(0,l._)("div",h,[g.oCurrentText?((0,l.wg)(),(0,l.j4)(C,{key:0,value:g.sCurrentTextContent,"onUpdate:value":t[2]||(t[2]=e=>g.sCurrentTextContent=e),lang:"text",theme:"chrome",style:{height:"100%"}},null,8,["value"])):(0,l.kq)("",!0)])]),(0,l._)("div",v,[(0,l._)("div",{class:"btn btn-light",onClick:t[3]||(t[3]=(...e)=>g.fnRunScript&&g.fnRunScript(...e))},"Запустить скрипт"),(0,l._)("div",{class:"btn btn-light",onClick:t[4]||(t[4]=(...e)=>g.fnRunScriptAndAdd&&g.fnRunScriptAndAdd(...e))},"Запустить и ответ в новой вкладке"),(0,l._)("div",{class:"btn btn-light",onClick:t[5]||(t[5]=(...e)=>g.fnShowHelp&&g.fnShowHelp(...e))},"Помощь")]),(0,l._)("div",y,[(0,l._)("div",k,[(0,l.Wm)(R,{table_name:"scripts",form_name:"scripts",filter_field:"name",default_item:c.oDefaultScriptItem},{default:(0,l.w5)((e=>[(0,l.Uk)((0,n.zw)(e.oItem.name),1)])),_:1},8,["default_item"])]),(0,l._)("div",I,[g.oCurrentScript?((0,l.wg)(),(0,l.j4)(C,{key:0,value:g.sCurrentScriptContent,"onUpdate:value":t[6]||(t[6]=e=>g.sCurrentScriptContent=e),lang:"javascript",theme:"chrome",style:{height:"100%"}},null,8,["value"])):(0,l.kq)("",!0)])])])):(0,l.kq)("",!0)],64)):(0,l.kq)("",!0),"scripts"==c.sMode?((0,l.wg)(),(0,l.iD)("div",D)):(0,l.kq)("",!0)]),(0,l.Wm)(E,{window_name:"help"}),(0,l.Wm)(S),(0,l.Wm)(x),(0,l.Wm)(F)],64)}var R=o(107),C=o(744);const E=(0,C.Z)(R.Z,[["render",g]]);var S=E,x=o(907),F=o(473),O=o(478),W=o(207),T=o(24);class U{static octokit=null;static oSHA={};static webdav=null;static oJsStore=null;static oRepoItem=null;static fnInit(e){U.oRepoItem=e,"github"==e.type&&U.fnInitGit(),"webdav"==e.type&&U.fnInitWebdav(),"localstorage"==e.type&&U.fnInitLocalStorage()}static async fnInitLocalStorage(){var e=new Worker("jsstore.worker.js");U.oJsStore=new T.Connection(e);var t={name:"Files",columns:{sFilePath:{primaryKey:!0,dataType:"string"},sData:{notNull:!0,dataType:"string"}}},o={name:"local_storage",tables:[t]};await U.oJsStore.initDb(o)}static fnInitGit(){U.octokit=new F.v({auth:U.oRepoItem.key})}static fnInitWebdav(){U.webdav=(0,O.createClient)(U.oRepoItem.url,{username:U.oRepoItem.username,password:U.oRepoItem.password})}static fnReadFileJSON(e){return new Promise(((t,o)=>{this.fnReadFile(e).then((({sData:e})=>{t(JSON.parse(e))})).catch((e=>{o(e)}))}))}static fnReadFile(e){return"localstorage"==U.oRepoItem.type?U.fnReadFileLocalStorage(e):"github"==U.oRepoItem.type?U.fnReadFileGithub(e):"webdav"==U.oRepoItem.type?U.fnReadFileWebdav(e):void 0}static fnWriteFileJSON(e,t){return this.fnWriteFile(e,JSON.stringify(t,null,4))}static fnWriteFile(e,t){return"localstorage"==U.oRepoItem.type?U.fnWriteFileLocalStorage(e,t):"github"==U.oRepoItem.type?U.fnWriteFileGithub(e,t):"webdav"==U.oRepoItem.type?U.fnWriteFileWebdav(e,t):void 0}static fnCreateDir(e){if("webdav"==U.oRepoItem.type)return U.fnCreateDirWebdav(e)}static fnCreateDirWebdav(e){return new Promise(((t,o)=>{_l(">>>",e),U.webdav.createDirectory(e),t()}))}static fnReadFileLocalStorage(e){return new Promise((async(t,o)=>{var a=await U.oJsStore.select({from:"Files",where:{sFilePath:e}});if(!a.length)return o("Cannot destructure property");t({sData:a[0].sData,sSHA:""})}))}static fnReadFileWebdav(e){U.oRepoItem;return new Promise((async(t,o)=>{try{var a=await U.webdav.getFileContents(e),l=new TextDecoder("utf-8"),n=l.decode(a);U.oSHA[e]="",t({sData:n,sSHA:""})}catch(s){console.error(s),o(s)}}))}static fnReadFileGithub(e){return new Promise((async(t,o)=>{var a=U.oRepoItem;return console.log("read",a),e=e.replace(/^\/+/,""),U.octokit.rest.repos.getContent({owner:a.login,repo:a.repo,path:e}).then((({data:o})=>{var a=(0,W.Jx)(o.content);U.oSHA[e]=o.sha,console.log(U.oSHA),t({sData:a,sSHA:o.sha})})).catch((e=>{console.error(e),o(e)}))}))}static fnWriteFileLocalStorage(e,t){return new Promise((async(o,a)=>{U.oJsStore.insert({into:"Files",values:[{sFilePath:e,sData:t}]}).catch((o=>{U.oJsStore.update({in:"Files",where:{sFilePath:e},set:{sData:t}}).catch((async e=>{console.error(e)}))})),o()}))}static fnWriteFileGithub(e,t,o=null){return new Promise((async(a,l)=>{var n=U.oRepoItem;return console.log("write",n),e=e.replace(/^\/+/,""),U.octokit.rest.repos.createOrUpdateFileContents({owner:n.login,repo:n.repo,path:e,sha:o||U.oSHA[e],message:U.fnGetUpdateMessage(),content:(0,W.cv)(t)}).then((()=>{a()})).catch((e=>{console.error(e),l(e)}))}))}static fnWriteFileWebdav(e,t){return new Promise((async(o,a)=>{U.oRepoItem;return new Promise((async(o,a)=>{try{var l=new TextEncoder,n=l.encode(t);await U.webdav.putFileContents(e,n,{contentLength:!1,overwrite:!0}),o()}catch(s){a(s)}}))}))}static fnGetUpdateMessage(){return"update: "+new Date}}var L=o(992);const M="textformater-database.json";var P=(0,x.MT)({state(){return{oStructure:{files:{name:{label:"Название",type:"text"},selected_text_index:0},files_texts:{name:{label:"Название",type:"text"},text:{},text_id:{}},scripts:{name:{label:"Название",type:"text"},content:{}}},oWindow:{help:{window_show:!1,title:"Помощь",content_html:'\n<b>sText</b> - переменная в которой обрабатывается текст \n<h6>Пример:</h6>\n<code><pre>\nsText = sText.replace(/text1/g, "text2");\n</pre></code>\n                    '}},oEditWindow:{files:{window_show:!1,edit_item:{}},files_texts:{window_show:!1,edit_item:{}},scripts:{window_show:!1,edit_item:{}}},oDatabase:{files:{last_index:0,data:[],selection_index:null,selection_item:null,filter:{name:""}},files_texts:{last_index:0,data:[],selection_index:null,selection_item:null,filter:{name:""}},scripts:{last_index:0,data:[],selection_index:null,selection_item:null,filter:{name:""}}},oForms:{files:{name:""},files_texts:{name:""},scripts:{name:"",content:""}},bShowSaveToast:!1,sTasksFilter:"",bShowRepoWindow:!0,aDefaultRepoList:[{type:"localstorage",name:"Локальное хранилище"}],aReposList:[],iSelectedRepoIndex:null}},mutations:{fnReposRemove(e,t){e.aReposList.splice(t-e.aDefaultRepoList.length,1),localStorage.setItem("aReposList",JSON.stringify(e.aReposList))},fnReposSelect(e,t){e.iSelectedRepoIndex=t},fnReposClean(e){e.aReposList=[],localStorage.setItem("aReposList",JSON.stringify(e.aReposList))},fnReposUpdate(e,{iIndex:t,oObj:o}){-1==t?e.aReposList.push(o):e.aReposList.splice(t-e.aDefaultRepoList.length,1,o),localStorage.setItem("aReposList",JSON.stringify(e.aReposList))},fnLoadRepos(e){try{e.aReposList=JSON.parse(localStorage.getItem("aReposList")||"[]")}catch(t){}},fnHideRepoWindow(e){e.bShowRepoWindow=!1},fnShowRepoWindow(e){e.bShowRepoWindow=!0},fnShowLoader(e){e.bShowLoader=!0},fnHideLoader(e){e.bShowLoader=!1},fnUpdateDatabase(e,t){e.oDatabase=t},fnUpdateRepos(e,t){e.aReposList=t},fnUpdateFormVar(e,{sFormName:t,sFieldName:o,mV:a}){e.oForms[t][o]=a},fnUpdateDatabaseVar(e,{sTableName:t,sVarName:o,mV:a}){e.oDatabase[t][o]=a},fnUpdateVar(e,{sName:t,sV:o}){e[t]=o},fnUpdateFilter(e,{sTableName:t,sName:o,sV:a}){e.oDatabase[t].filter[o]=a},fnHideWindow(e,t){e.oWindow[t].window_show=!1},fnShowWindow(e,t){e.oWindow[t].window_show=!0},fnHideEditWindow(e,t){e.oEditWindow[t].window_show=!1},fnShowEditWindow(e,{sFormName:t,oItem:o}){for(var a in e.oEditWindow[t].window_show=!0,e.oEditWindow[t].edit_item=o,e.oForms[t])e.oForms[t][a]=a in o?o[a]:""},fnEditWindowSave(e,{sTableName:t,sFormName:o}){for(var a in e.oForms[o])e.oEditWindow[o].edit_item[a]=e.oForms[o][a];e.oEditWindow[o].edit_item.id||(e.oEditWindow[o].edit_item.id=++e.oDatabase[t]["last_index"],e.oDatabase[t]["data"].push(e.oEditWindow[o].edit_item))},fnAddTableItem(e,{sTableName:t,oItem:o}){o.id=++e.oDatabase[t]["last_index"],e.oDatabase[t]["data"].push(o)},fnRemoveFromTable(e,{sTableName:t,oItem:o}){e.oDatabase[t]["data"]=e.oDatabase[t]["data"].filter((e=>e.id!=o.id))}},actions:{fnExportDatabase({commit:e,state:t,dispatch:o,getters:a}){(0,L.N)("tasks-database",JSON.stringify(t.oDatabase,null,4))},fnImportDatabase({commit:e,state:t,dispatch:o,getters:a},l){e("fnUpdateDatabase",JSON.parse(l))},fnExportRepos({commit:e,state:t,dispatch:o,getters:a}){(0,L.N)("tasks-repos",JSON.stringify(t.aReposList,null,4))},fnImportRepos({commit:e,state:t,dispatch:o,getters:a},l){e("fnUpdateRepos",JSON.parse(l))},fnGetFieldValue:({state:e,getters:t})=>(e,o)=>t.fnGetFieldValue(e,o),fnPrepareRepo({commit:e,state:t,dispatch:o,getters:a}){e("fnHideRepoWindow"),U.fnInit(a.oCurrentRepo),o("fnLoadDatabase")},fnSaveDatabase({commit:e,state:t}){return U.fnWriteFileJSON(M,t.oDatabase).catch((()=>{U.fnReadFile(M).then((()=>U.fnWriteFileJSON(M,t.oDatabase)))}))},fnLoadDatabase({commit:e,state:t}){e("fnShowLoader"),U.fnReadFileJSON(M).then((t=>{if(!t)throw"Cannot destructure property";e("fnUpdateDatabase",t),e("fnHideLoader")})).catch((o=>{((o+"").match(/Cannot destructure property/)||(o+"").match(/Not Found/))&&U.fnWriteFileJSON(M,t.oDatabase).then((()=>{U.fnReadFileJSON(M).then((t=>{e("fnUpdateDatabase",t),e("fnHideLoader")}))}))}))}},getters:{fnGetFieldValue:e=>(t,o)=>e.oForms[t][o],aReposList(e){return e.aDefaultRepoList.concat(e.aReposList)},oCurrentRepo(e,t){return t.aReposList[e.iSelectedRepoIndex]}}});(0,a.ri)(S).use(P).mount("#app")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](o,o.exports,__webpack_require__),o.loaded=!0,o.exports}__webpack_require__.m=__webpack_modules__,function(){__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){var e=[];__webpack_require__.O=function(t,o,a,l){if(!o){var n=1/0;for(_=0;_<e.length;_++){o=e[_][0],a=e[_][1],l=e[_][2];for(var s=!0,i=0;i<o.length;i++)(!1&l||n>=l)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](o[i])}))?o.splice(i--,1):(s=!1,l<n&&(n=l));if(s){e.splice(_--,1);var r=a();void 0!==r&&(t=r)}}return t}l=l||0;for(var _=e.length;_>0&&e[_-1][2]>l;_--)e[_]=e[_-1];e[_]=[o,a,l]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,l,n=o[0],s=o[1],i=o[2],r=0;if(n.some((function(t){return 0!==e[t]}))){for(a in s)__webpack_require__.o(s,a)&&(__webpack_require__.m[a]=s[a]);if(i)var _=i(__webpack_require__)}for(t&&t(o);r<n.length;r++)l=n[r],__webpack_require__.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return __webpack_require__.O(_)},o=self["webpackChunkwapp_text_transformer_vue"]=self["webpackChunkwapp_text_transformer_vue"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(636)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.3683433c.js.map